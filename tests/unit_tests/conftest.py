"""Setup fixtures to use for testing.

There is a fixture for each file that is created in the project structure. The
mock_regression_project fixture creates the entire project structure and
returns the path to the root directory. These files can be accessed by passing
mock_regression_project to the test function and using the path relative to this
root directory.
"""
import pytest
import sqlite3
from io import StringIO

import pandas as pd

from brisk.configuration import project

@pytest.fixture
def mock_briskconfig_file(tmp_path):
    """Create a .briskconfig file for testing."""
    briskconfig_path = tmp_path / '.briskconfig'
    with open(briskconfig_path, 'w', encoding='utf-8') as f:
        f.write('project_name=brisk-testing')
    return briskconfig_path


@pytest.fixture
def mock_algorithms_py(tmp_path):
    algorithm_path = tmp_path / 'algorithms.py'
    algorithm_py = """
import numpy as np
import sklearn.linear_model as linear
import sklearn.ensemble as ensemble

import brisk
    
ALGORITHM_CONFIG = brisk.AlgorithmCollection(
    brisk.AlgorithmWrapper(
        name="linear",
        display_name="Linear Regression",
        algorithm_class=linear.LinearRegression
    ),
    brisk.AlgorithmWrapper(
        name="ridge",
        display_name="Ridge Regression",
        algorithm_class=linear.Ridge,
        default_params={"max_iter": 10000},
        hyperparam_grid={"alpha": [0.1, 0.5, 1.0]}
    ),
    brisk.AlgorithmWrapper(
        name="elasticnet",
        display_name="Elastic Net Regression",
        algorithm_class=linear.ElasticNet,
        default_params={"alpha": 0.1, "max_iter": 10000},
        hyperparam_grid={
            "alpha": [0.1, 0.2, 0.5],
            "l1_ratio": [0.1, 0.5, 1.0]
        }
    ),
    brisk.AlgorithmWrapper(
        name="rf",
        display_name="Random Forest",
        algorithm_class=ensemble.RandomForestRegressor,
        default_params={'n_jobs': 1},
        hyperparam_grid={
            'n_estimators': list(range(20, 160, 20))
        }
    ),
    brisk.AlgorithmWrapper(
        name="rf_classifier",
        display_name="Random Forest Classifier",
        algorithm_class=ensemble.RandomForestClassifier,
        default_params={"min_samples_split": 10},
        hyperparam_grid={
            "n_estimators": list(range(20, 160, 20)),
            "criterion": ["friedman_mse", "absolute_error", 
                          "poisson", "squared_error"],
            "max_depth": list(range(5, 25, 5)) + [None],
        }
    ),
)
"""
    algorithm_path.write_text(algorithm_py)
    return algorithm_path


@pytest.fixture
def mock_data_py(tmp_path):
    data_path = tmp_path / 'data.py'
    data_py = """
from brisk.data.data_manager import DataManager

BASE_DATA_MANAGER = DataManager(
    test_size=0.2, 
    n_splits=5,
    split_method="shuffle",
    random_state=42
)
"""
    data_path.write_text(data_py)
    return data_path


@pytest.fixture
def mock_metric_py(tmp_path):
    metric_path = tmp_path / 'metric.py'
    metric_py = """
import brisk

METRIC_CONFIG = brisk.MetricManager(
    *brisk.REGRESSION_METRICS,
    *brisk.CLASSIFICATION_METRICS
)
"""
    metric_path.write_text(metric_py)
    return metric_path


@pytest.fixture
def mock_training_py(tmp_path):
    training_path = tmp_path / 'training.py'
    training_py = """
from brisk.training.training_manager import TrainingManager
from metrics import METRIC_CONFIG
from settings import create_configuration

config = create_configuration()

# Define the TrainingManager for experiments
manager = TrainingManager(
    metric_config=METRIC_CONFIG,
    config_manager=config
)             
"""
    training_path.write_text(training_py)
    return training_path


@pytest.fixture
def mock_settings_py(tmp_path):
    settings_path = tmp_path / 'settings.py'
    settings_py = """
from brisk.configuration.configuration import Configuration, ConfigurationManager

def create_configuration() -> ConfigurationManager:
    config = Configuration(
        default_algorithms = ["linear"],
    )
    config.add_experiment_group(
        name="test_group",
        description="The group used for unit testing.",
        datasets=["data.csv"]
    )
    
    return config.build()
"""
    settings_path.write_text(settings_py)
    return settings_path


@pytest.fixture
def mock_datasets(tmp_path):
    """Create a datasets directory with sample files."""
    datasets_dir = tmp_path / 'datasets'
    datasets_dir.mkdir()

    sample_data = {
        'regression.csv': """x,y,target
1.0,2.0,0.5
2.0,3.0,1.3
3.0,4.0,0.1
4.0,5.0,1.0
5.0,6.0,0.8""",

        'classification.csv': """feature1,feature2,label
0.1,0.2,A
0.3,0.4,B
0.5,0.6,A
0.7,0.8,B
0.9,1.0,A""",

        'categorical.csv': """value,category,result
10.0,A,positive
20.0,B,negative
30.0,A,positive
40.0,B,negative
60.0,B,negative""",

        'group.csv': """group,x,y,target
A,1.0,2.0,0.2
A,2.0,3.0,1.9
B,3.0,4.0,0.3
B,4.0,5.0,1.2
C,5.0,6.0,0.7""",

        'regression100.csv':"""feature_1,feature_2,feature_3,feature_4,feature_5,target
0.9751197334177512,-0.6771617115121117,-0.012246772846914623,-0.8972543714858315,0.07580455819372633,-57.195760164474834
0.08187413938632256,-0.48536354782910346,0.7589692204932674,-0.7728252145375718,-0.23681860674000887,-46.54647693082984
-1.4123037013352915,-0.9080240755212109,-0.5622875292409727,-1.0128311203344238,0.3142473325952739,-258.13344025001055
-0.6451197546051243,0.36163602504763415,1.356240028570823,-0.07201012158033385,1.0035328978920242,115.85075098094916
-0.6226995198205938,0.28099186773503265,-1.9520877995225019,-0.15178509503558332,0.5883172064845765,-123.76771229053827
-0.45006547147924364,0.046980593764742055,-1.594427658794367,-0.5993750229537729,0.005243699718183166,-159.54366455623546
0.7746340534293368,0.44381942814622843,-0.48423407286625136,1.2669111491866227,-0.7076694656187807,106.60282475487674
0.35701548596504734,0.8496020970210246,-0.20812225035727522,-0.4930009346588328,-0.5893647569442115,42.84513645144763
-1.3044695005048532,-0.08912003951278841,0.3840654489393073,-0.03269474809409311,-2.0674421000398766,-138.52769011376986
0.173180925851182,-1.245738778711988,-0.4465149520670211,0.8563987943234723,0.21409374413020396,-84.62851008217469
0.29698467323318606,0.5219415656168976,0.7818228717773104,-1.236950710878082,-1.3204566130842763,2.4364852779010766
-1.7249178325130328,-1.913280244657798,-0.46341769281246226,-0.46572975357025687,0.24196227156603412,-341.18459790750796
-1.9875689146008928,0.0917607765355023,0.8219025043752238,0.08704706823817122,-0.29900735046586746,-63.99383374259063
-0.05554769889661878,-1.7033824393551547,0.07409478041977519,1.6286155455712918,-1.3801014582148914,-122.76722081875232
0.6565536086338297,-1.1913034972026486,-0.7143514180263678,1.8657745111447566,0.4738329209117875,-0.49856127447801235
-0.01901620790268883,-0.1599385299634271,0.3109075655980046,1.475356216949552,0.8576596232020194,117.99227333646684
-0.39210815313215763,-0.3276621465977682,0.09707754934804039,0.9686449905328892,-0.7020530938773524,-19.314282895691537
0.19686123586912352,-1.3281860488984305,-1.2208436499710222,0.2088635950047554,-1.9596701238797756,-255.87486488507713
-1.2308643164339552,0.8135172173696698,1.5499344050175394,-0.7832532923362371,-0.3220615162056756,49.59941321001804
1.502357052096028,0.7175422557959623,-1.183258512665775,-2.0392321777601006,-0.26940683444455776,-40.47052310601183
1.5231240772696573,-0.8612842013282637,-0.007972641316617372,1.4799441388900259,0.0773683076476183,93.84889376884686
0.9633761292443218,-0.8206823183517105,-0.9746816702273214,0.787084603742452,1.158595579007404,0.9016369090134313
-1.2002964070557762,0.8657551941701215,-0.7925207384327007,-0.11473644146689901,0.5049872789804571,-27.071605325349818
-0.5769036556624031,0.9504238381860503,0.15039378647620763,0.34175597577715944,1.8761708392158862,154.80406577269767
-1.006017381499702,2.0923872756854602,0.09699596499271819,0.5951570254369136,-0.8182206832334725,156.67919270946368
3.852731490654721,0.5150476863060479,-0.9378250399151228,0.5150352672086598,0.5137859509122088,271.5595056217349
-0.3853135968617602,0.06980208499001891,0.46210347426327075,0.19905969557347003,-0.6002168771587947,3.4846759720931404
-0.07444591576616721,0.25755039072276437,0.4040508568145384,1.8861859012105302,0.17457781283183896,160.7962185028253
-1.382799730964336,-0.8756182533847572,0.5389100436846587,-1.0372461543264564,-0.1903386780836082,-201.29203448217058
2.1531824575115563,0.9592708260852069,0.024510174258942714,0.49799829124544975,1.4511436077950417,306.76698583672857
-0.47193186578943347,-1.6127158711896517,2.3146585666735087,-1.867265192591748,0.6862601903745135,-120.30250884400876
-0.13014305436768459,0.3241663524884421,0.02100384163275905,0.6819529712949639,-0.31026675659345604,53.105306280427506
1.2378163119734618,-0.11453984525261789,-0.4691756521047048,-1.7131345290908775,1.3538723741654128,-16.066916946597626
1.6449677135012837,1.3668742674445247,-0.275051697151644,-2.301921164735585,-1.5151910621985523,31.478430813401072
0.06751848141010895,1.1792971840638264,-0.7484865365565536,1.551151975522523,0.11567463429285867,164.77943659229683
0.852433334796224,-0.661786464768388,0.6339190223180112,-2.025142586657607,0.18645431476942764,-81.4952110626815
0.7519330326867741,1.1428228145150205,0.30154734233361247,-0.03471176970524331,-1.168678037619532,134.0711663109808
-0.8084936028931876,-0.5182702182736474,-0.21967188783751193,0.3571125715117464,1.477894044741516,-41.23027440467099
0.40498171096095553,1.7654542402810969,-0.3345012358409484,-0.4749453111609562,-0.6533292325737119,126.72919856998085
-0.7537361643574896,-0.2453881160028705,0.4127809269364983,0.82206015999449,1.8967929826539474,71.09936801619357
-0.9194242342338032,0.4735924306351816,-1.5506634310661327,0.06856297480602733,-1.0623037137261049,-143.09653756199108
0.5132674331133561,-0.5297602037670388,-0.5017570435845365,0.9154021177020741,0.32875110965968446,10.39808080479109
0.822544912103189,-1.0577109289559004,-0.6017066122293969,1.8522781845089378,-0.013497224737933921,11.778166087037365
0.5425600435859647,-0.4694743859349521,-0.23413695694918055,1.5792128155073915,0.7674347291529088,88.87153889956063
1.1195749114345768,3.0788808084552377,-0.24903603955637832,0.5765569630557664,0.3112501545435361,399.56114091592275
1.179440120721287,1.8314587658543537,-0.898414671348358,0.4919191715065057,-1.3202332070206422,175.20910464552165
0.6453759495851475,0.9715709509543554,2.060747924881987,1.7553408424432044,-0.2489641484790735,359.26584339867804
0.5868570938002703,-1.4018510627922809,0.7910319470430469,-0.9093874547947389,1.4027943109360992,-53.57514381095141
0.27669079933001905,0.3411519748166439,-0.8895144296255233,-0.8158102849654383,-0.0771017094141042,-56.36397912865895
0.6901439917111125,0.40171172209894146,0.5193465142411723,1.5327389130025777,-0.1087601484568576,198.50616287004883
-0.5034756541161992,0.09965136508764122,2.1904556258099785,-0.9905363251306883,-0.5662977296027719,43.839340627117195
-1.763040155362734,0.3436182895684614,-0.7198442083947086,-0.4606387709597875,1.0571222262189157,-107.97806454064354
-0.020901593964148132,0.6103702654334648,-0.8289950109220723,-0.5601810401969696,0.7472936051232618,0.01352434560062617
-0.2525681513931603,-1.0243876413342898,-0.926930471578083,-0.05952535606180008,-3.2412673400690726,-295.07927761313965
-0.759132661553698,-0.525755021680761,-0.8397218421807761,-0.5993926454440222,-2.123895724309807,-262.02270510119104
-1.1978778925888485,-0.553649305347182,-0.7928728322623442,-0.10703035995455783,-1.035242322419374,-221.4139625230554
-1.7587394864231143,1.0584244868495878,1.3686315575323487,-0.9649234605801045,0.6860514599984393,55.55008216283327
-2.6197451040897444,1.5646436558140062,0.36139560550841393,1.5380365664659692,-0.03582603910995154,105.43972276367093
-0.7563507452843033,0.2034636358672231,-0.12791759148076653,-0.9555404406004258,-1.6064463202575725,-145.6148558925777
0.33231401197959165,1.277676821898509,0.7116148780888898,-1.1246420918378692,-1.5341141707356223,73.2697712439747
-0.9815086510479509,0.010233061019587049,1.4412732890661155,-1.4358621511794394,1.1631637521549596,-5.835156557969255
0.6283455092642799,0.6241198170521551,-1.2141886127877322,1.1581108735000678,0.7916626939629359,115.41637541044463
1.305478807154329,0.8135096360006385,-0.2176812032272203,1.09877685198719,0.8254163489880298,237.31714423979443
-0.21344715171184725,-0.718444221252436,0.2320499373576363,-1.4480843414973241,-1.4074637743765552,-201.50772964110084
2.1330333746562666,-1.237815498826849,0.11351734525124804,0.6621306745210467,1.586016816145352,108.48339656866276
0.13074057728609134,-0.44004448669698376,-1.2477831819648495,1.6324113039316352,-1.4301413779606327,-73.87186800638752
2.720169166589619,-0.2646568332379561,0.8271832490360238,0.01300189187790702,1.4535340771573169,244.56263696401484
-0.16128571166600914,-0.8022772692216189,-1.4153707420504142,-0.42064532276535904,-0.3427145165267695,-216.45756771704828
-0.5302576183724408,0.5040465155178444,-0.06267909727317188,0.9551423205012383,-0.9857260463355437,33.0995022722061
-0.23415337472333597,1.5230298564080254,0.4967141530112327,-0.13826430117118466,0.6476885381006925,183.28442764431145
-0.11232804969082982,0.213979910734222,1.9647251329163893,0.03526355197172861,-0.6997255079925856,118.26290787379254
0.8816397569494505,1.6871416350725648,-1.4222537095976742,-0.6465728842425266,-1.081548003614395,52.663104704811616
-1.377669367957091,1.053802052034903,0.3577873603482833,0.5607845263682344,1.083051243175277,114.11667096503962
-1.142970297830623,0.058208718445999896,0.3853173797288368,-0.883857436201133,0.1537251059455279,-83.50497023264761
0.25988279424842353,0.1846338585323042,0.22745993460412942,1.307142754282428,-1.6074832345612275,65.86397810518451
-1.5193699659540134,1.0324652605511468,-1.2608839543350452,0.9178619470547761,2.1221561970126332,56.27140149046089
-1.4785219903674274,-0.3011036955892888,0.7384665799954104,0.1713682811899705,-0.11564828238824053,-66.15779198547361
0.29307247329868125,0.23225369716100355,0.25049285034587654,0.3464482094969757,-0.6800247215784908,52.29067923375386
-0.57581824064468,-0.5305011476105275,-0.22096959953322298,0.6141667000434252,0.7575077100473051,-39.514533902578066
-0.2234627853258509,0.4824724152431853,0.6256673477650062,-0.8571575564162826,-1.0708924980611123,-12.6462624307198
-0.5443827245251827,-1.4247481862134568,1.465648768921554,-0.22577630048653566,0.06752820468792384,-89.38249000704626
-0.5637245528039747,0.41293145427562433,-0.14705738150213865,-0.8254971967925115,-0.32138584165299344,-61.471814400809514
-0.8082982853551515,2.1898029332176723,-0.7673475628880495,0.8723206367206782,0.18334200573835174,173.87423355027286
-0.3152692446403456,0.651391251305798,0.570890510693167,1.135565640180599,0.9540017634932023,180.64761486269504
0.6296288419236122,0.8128621188389601,-0.6929095952606542,0.8995998754332507,0.30729952087660933,135.95999810879633
0.514438834058749,0.12029563171189886,0.6228499323474987,-1.0676204293825944,-0.1423794850212935,17.26236845917056
-0.20219265243389406,0.5470973811700379,0.117327383308782,1.277664895788425,-0.5915713888358299,101.29282922419601
0.812525822394198,-1.1962066240806708,-0.47917423784528995,-0.18565897666381712,-1.1063349740060282,-149.70703474571084
0.9755451271223592,0.33126343140356396,0.9312801191161986,-0.8392175232226385,-0.3092123758512146,93.00854064169734
0.6795977489346758,-0.7153037092599682,1.088950596967366,0.06428001909546277,-1.0777447779293061,6.239479990108497
-1.0592135218889516,-0.5138669173366935,0.6696725488300385,0.36659824609684827,-0.9398797863273552,-84.06420349121387
2.1439440893253257,-0.6516003476058171,-0.7303666317171367,0.21645858958197486,0.045571839903813784,32.44431583258749
-0.19236096478112252,2.463242112485286,-1.9187712152990415,-0.026513875449216878,0.06023020994102644,107.98807452894879
-0.827230943552323,0.3227185603380895,-1.0025293646378088,-0.01851313599238993,-0.2886586389201383,-94.35615682671116
-0.2916937497932768,-0.600638689918805,0.11092258970986608,-1.1509935774223028,0.37569801834567196,-122.11839218472637
-1.5148472246858646,-0.846793718068405,0.714000494092092,0.47323762457354485,-0.07282891265687277,-104.69061070841285
-0.7730097838554665,0.09767609854883172,-0.40122047188583626,0.22409248181041677,0.01259240078179486,-49.83879410737723
1.030999522495951,0.6116762888408679,0.324083969394795,-0.38508228041631654,-0.6769220003059587,97.68568933326647
-0.23458713337514692,0.00511345664246089,-1.4635149481321186,0.29612027706457605,0.26105527217988933,-81.87724437589357
-0.4710383056183228,-0.5069431753711298,-0.8222203955664315,0.2436872114919123,0.24496657110872277,-109.0452658237058
""",
        'regression100_group.csv':"""cont_feature_1,cont_feature_2,cont_feature_3,cont_feature_4,cat_feature_1,group,target
0.852433334796224,-0.661786464768388,0.18645431476942764,-2.025142586657607,1,Group_1,-8.924580992236239
-0.4930009346588328,-0.20812225035727522,-0.6226995198205938,0.28099186773503265,0,Group_2,-44.00865129006749
-1.142970297830623,0.058208718445999896,0.1537251059455279,-0.883857436201133,0,Group_2,-125.87270749203279
0.37569801834567196,-1.1509935774223028,0.11092258970986608,-0.5443827245251827,2,Group_2,11.461339383547326
-1.1962066240806708,-1.1063349740060282,-0.18565897666381712,-0.47917423784528995,1,Group_2,-129.6172439517979
0.8657551941701215,0.5049872789804571,-0.11473644146689901,-0.7925207384327007,0,Group_3,38.62842590907278
-0.23458713337514692,0.00511345664246089,0.26105527217988933,0.29612027706457605,0,Group_2,4.068143032901956
0.5137859509122088,0.5150352672086598,-0.9378250399151228,-1.377669367957091,1,Group_1,-35.407049589188134
-1.4301413779606327,1.6324113039316352,-1.2477831819648495,-0.2525681513931603,0,Group_3,-162.11006949333154
-0.7673475628880495,2.1531824575115563,0.9592708260852069,1.4511436077950417,0,Group_1,32.26171294264138
-0.8082982853551515,2.1898029332176723,0.18334200573835174,0.8723206367206782,1,Group_2,-11.455701890754241
-1.2308643164339552,0.8135172173696698,-0.3220615162056756,-0.7832532923362371,1,Group_1,-142.9827500904068
-0.026513875449216878,-1.9187712152990415,-0.07444591576616721,0.25755039072276437,1,Group_1,-4.637467603092635
0.17457781283183896,1.8861859012105302,0.4040508568145384,-0.16128571166600914,0,Group_3,27.192033562221336
0.01259240078179486,0.22409248181041677,-0.40122047188583626,0.6901439917111125,2,Group_3,16.924964424923314
1.5499344050175394,-0.9194242342338032,0.4735924306351816,-1.0623037137261049,0,Group_2,102.73232805780142
-1.4358621511794394,1.4412732890661155,0.13074057728609134,-0.44004448669698376,1,Group_2,-125.773908866216
1.5380365664659692,0.36139560550841393,-0.6451197546051243,0.36163602504763415,2,Group_1,132.40493825374136
-0.5069431753711298,0.24496657110872277,0.2436872114919123,-0.8222203955664315,1,Group_1,-70.00837914674737
-0.5662977296027719,-0.9905363251306883,2.1904556258099785,0.5868570938002703,2,Group_1,29.75110730062243
0.30154734233361247,-0.19236096478112252,2.463242112485286,0.06023020994102644,1,Group_2,99.71795101221034
-1.237815498826849,1.586016816145352,0.6621306745210467,0.11351734525124804,1,Group_2,-70.43490472460505
-0.7143514180263678,0.29307247329868125,0.23225369716100355,-0.6800247215784908,0,Group_2,-76.93971972876875
1.8967929826539474,0.82206015999449,0.4127809269364983,0.9633761292443218,1,Group_1,219.89386960612148
-0.13014305436768459,0.3241663524884421,-0.31026675659345604,0.6819529712949639,0,Group_3,7.284015418515525
0.9755451271223592,0.33126343140356396,-0.3092123758512146,-0.8392175232226385,0,Group_2,48.113734728999255
0.8563987943234723,-0.4465149520670211,-1.5148472246858646,-0.846793718068405,2,Group_2,-0.11210080928924704
0.7519330326867741,1.1428228145150205,-1.168678037619532,-0.03471176970524331,1,Group_2,42.867733105444174
1.0035328978920242,-0.07201012158033385,1.356240028570823,0.812525822394198,2,Group_2,162.27542152602192
-0.5637245528039747,0.41293145427562433,-0.32138584165299344,-0.8254971967925115,1,Group_1,-89.51340902015727
0.7916626939629359,1.1581108735000678,-1.2141886127877322,-1.006017381499702,2,Group_1,0.07776022917320519
-0.8972543714858315,-0.012246772846914623,0.6283455092642799,0.6241198170521551,1,Group_3,-37.66315231059577
-0.525755021680761,-2.123895724309807,-0.5993926454440222,-0.8397218421807761,1,Group_1,-108.67693314497913
0.5883172064845765,-0.15178509503558332,-1.9520877995225019,2.1330333746562666,1,Group_1,85.26502004591235
1.2378163119734618,-0.11453984525261789,1.3538723741654128,-1.7131345290908775,0,Group_1,72.53363074284825
0.4824724152431853,-1.0708924980611123,-0.8571575564162826,0.6256673477650062,2,Group_1,38.10787973080792
0.7674347291529088,1.5792128155073915,-0.23413695694918055,-0.23415337472333597,0,Group_3,56.15477837955989
-0.8206823183517105,1.158595579007404,0.787084603742452,-0.9746816702273214,0,Group_2,-78.55358739019039
0.9686449905328892,0.09707754934804039,0.5132674331133561,-0.5297602037670388,1,Group_2,81.43032508888582
0.7746340534293368,0.44381942814622843,-0.7076694656187807,1.2669111491866227,0,Group_1,102.75357227166533
0.19686123586912352,-1.3281860488984305,-1.9596701238797756,0.2088635950047554,2,Group_2,-30.491845255378998
-0.48423407286625136,-1.5193699659540134,1.0324652605511468,2.1221561970126332,2,Group_2,70.79908371057752
0.21645858958197486,-0.7303666317171367,0.6795977489346758,-0.7153037092599682,2,Group_1,3.3888828382658445
-0.14705738150213865,0.9751197334177512,-0.6771617115121117,0.07580455819372633,1,Group_2,-17.730879448569148
-0.8158102849654383,-0.8895144296255233,-0.7537361643574896,-0.2453881160028705,0,Group_1,-106.47692693025864
-0.38508228041631654,0.324083969394795,-1.763040155362734,0.3436182895684614,2,Group_2,-60.38746345331704
2.0923872756854602,-0.8182206832334725,0.5951570254369136,0.09699596499271819,1,Group_2,201.45560109596988
-0.3011036955892888,-0.11564828238824053,0.1713682811899705,0.7384665799954104,2,Group_1,8.475869251229417
-1.3204566130842763,-1.236950710878082,0.7818228717773104,0.25988279424842353,2,Group_1,-89.17051197884157
0.3464482094969757,0.25049285034587654,0.29698467323318606,0.5219415656168976,2,Group_2,66.1356880527918
0.9312801191161986,1.030999522495951,0.6116762888408679,-0.6769220003059587,0,Group_2,79.91095569653577
0.9178619470547761,-1.2608839543350452,0.40498171096095553,1.7654542402810969,1,Group_3,153.55701898694298
1.5230298564080254,0.6476885381006925,-0.13826430117118466,0.4967141530112327,2,Group_2,157.17612832712334
-0.07282891265687277,0.47323762457354485,0.714000494092092,-0.2234627853258509,1,Group_1,6.570441183611753
1.0571222262189157,-0.4606387709597875,-0.7198442083947086,-1.4785219903674274,0,Group_1,7.929592727743564
0.3853173797288368,0.173180925851182,-1.245738778711988,0.21409374413020396,1,Group_2,14.110951033506494
-0.4691756521047048,1.179440120721287,1.8314587658543537,-1.3202332070206422,2,Group_1,-38.521368801766954
1.8761708392158862,0.34175597577715944,0.15039378647620763,-0.759132661553698,1,Group_2,141.6973642884733
-1.9875689146008928,0.0917607765355023,-0.29900735046586746,0.08704706823817122,1,Group_3,-178.7408817261774
0.8219025043752238,-2.6197451040897444,1.5646436558140062,-0.03582603910995154,0,Group_2,102.80121040530541
0.6103702654334648,0.7472936051232618,-0.5601810401969696,-0.8289950109220723,1,Group_1,7.320036878603048
0.7589692204932674,-0.3152692446403456,0.651391251305798,0.9540017634932023,2,Group_2,126.15648462340612
0.46210347426327075,-0.9815086510479509,0.010233061019587049,1.1631637521549596,0,Group_2,87.9283925029875
-0.5915713888358299,1.277664895788425,0.117327383308782,-0.020901593964148132,1,Group_2,-36.30293956951644
-1.4123037013352915,-0.9080240755212109,0.3142473325952739,-1.0128311203344238,2,Group_3,-163.7733199492667
0.8271832490360238,0.27669079933001905,0.3411519748166439,-0.0771017094141042,2,Group_1,79.28421882740625
2.720169166589619,-0.2646568332379561,1.4535340771573169,0.01300189187790702,1,Group_3,271.0437517684673
-0.6929095952606542,0.35701548596504734,0.8496020970210246,-0.5893647569442115,2,Group_3,-62.14893159681753
-0.8022772692216189,-0.3427145165267695,-0.42064532276535904,-1.4153707420504142,1,Group_1,-141.45125491346823
1.8522781845089378,-0.6017066122293969,-0.2916937497932768,-0.600638689918805,0,Group_1,123.93915464571106
1.09877685198719,-0.2176812032272203,-0.20219265243389406,0.5470973811700379,2,Group_1,111.06503817116796
-1.0777447779293061,0.06428001909546277,1.088950596967366,-0.47193186578943347,2,Group_1,-82.691960418163
1.475356216949552,0.3109075655980046,-0.21344715171184725,-0.718444221252436,2,Group_1,93.78001068445575
1.053802052034903,1.083051243175277,0.5607845263682344,0.3577873603482833,2,Group_2,132.3057670324916
0.02100384163275905,1.305478807154329,0.8135096360006385,0.8254163489880298,1,Group_1,65.64496770512051
0.40171172209894146,-0.1087601484568576,1.5327389130025777,0.5193465142411723,1,Group_1,97.58117966420824
-0.827230943552323,0.3227185603380895,-0.2886586389201383,-0.01851313599238993,2,Group_3,-81.2252667077583
-1.0243876413342898,-3.2412673400690726,-0.05952535606180008,-0.926930471578083,1,Group_1,-146.85649540137996
-1.4247481862134568,0.06752820468792384,-0.22577630048653566,1.465648768921554,2,Group_3,-71.20962248568917
-1.4074637743765552,-1.4480843414973241,0.2320499373576363,-0.4710383056183228,2,Group_1,-142.89665333849854
0.1846338585323042,-1.6074832345612275,1.307142754282428,0.22745993460412942,2,Group_1,51.93911516405907
0.6565536086338297,-1.1913034972026486,0.4738329209117875,1.8657745111447566,1,Group_2,145.40525012100298
-1.4018510627922809,1.4027943109360992,-0.9093874547947389,0.7910319470430469,1,Group_2,-100.38956456900958
-0.46572975357025687,-0.46341769281246226,0.5425600435859647,-0.4694743859349521,0,Group_3,-50.57097855309443
-1.2208436499710222,0.822544912103189,-1.0577109289559004,-0.013497224737933921,1,Group_2,-125.33923893069047
0.08187413938632256,-0.48536354782910346,-0.23681860674000887,-0.7728252145375718,0,Group_3,-37.20020937970681
-1.4635149481321186,-0.39210815313215763,-0.3276621465977682,-0.7020530938773524,1,Group_1,-166.70812470504143
-1.0025293646378088,-0.01901620790268883,-0.1599385299634271,0.8576596232020194,1,Group_1,-55.59439823557536
-0.6533292325737119,-0.4749453111609562,-0.3345012358409484,-1.2002964070557762,0,Group_3,-121.08710660370652
0.6296288419236122,0.8128621188389601,0.30729952087660933,0.8995998754332507,1,Group_3,101.80456458070596
-0.5622875292409727,-1.7249178325130328,-1.913280244657798,0.24196227156603412,0,Group_3,-103.55765383806926
0.49799829124544975,0.024510174258942714,-0.7730097838554665,0.09767609854883172,0,Group_2,31.27067721134396
0.4919191715065057,-0.898414671348358,-0.5769036556624031,0.9504238381860503,2,Group_1,60.98669461692281
-0.5182702182736474,1.477894044741516,0.3571125715117464,-0.21967188783751193,1,Group_3,-38.857888873020265
0.32875110965968446,0.9154021177020741,-0.5017570435845365,-0.8084936028931876,0,Group_1,-13.570657738926677
1.135565640180599,0.570890510693167,3.852731490654721,0.5150476863060479,1,Group_3,225.06188579345874
0.06856297480602733,-1.5506634310661327,-0.5034756541161992,0.09965136508764122,2,Group_3,-15.294560022268733
-0.3853135968617602,0.06980208499001891,-0.6002168771587947,0.19905969557347003,0,Group_2,-36.30857780919404
0.6339190223180112,2.1439440893253257,-0.6516003476058171,0.045571839903813784,1,Group_3,48.1746546134137
-1.6127158711896517,0.6862601903745135,-1.867265192591748,2.3146585666735087,0,Group_3,-93.72564777331681
""",
        'classification100.csv':"""cont_feature_1,cont_feature_2,cont_feature_3,cat_feature_1,cat_feature_2,target
-0.8695806634977618,-0.8770146416453292,0.4420019951375176,0,0,0
-2.152784496306716,-0.37230102976308976,-0.6472971811757786,2,1,0
-2.111619286372836,-0.4808629585767341,-0.5178659652793052,1,0,0
1.1266011080361533,-2.7042363299221863,2.8518043991051734,1,0,1
-1.5611067450945075,-0.8756815913980787,0.3065350752335284,0,1,0
-2.1818072431825817,-0.7167068408087496,0.6005417788386062,0,0,0
1.748071653653533,-2.299415870378726,1.1679141081606885,0,0,1
-1.1519393954114605,1.8077842960669295,1.1455228375218038,2,1,1
1.0354423218433257,-0.2693422870837898,-1.1939055309899511,1,0,1
-2.8264353041192947,-0.7403826685055179,1.53726558991875,1,0,0
0.04512781494747442,0.25748089136815056,0.9357430439544243,0,0,1
0.9340419462646143,-1.125745220536598,0.22329785345072717,2,0,1
-1.8613582281707146,-0.8612599096898237,0.9781878960170138,2,1,0
2.571056766619024,-1.9701877172315805,0.2392623655792454,0,1,1
-0.32417080739101645,-0.5560560763326415,-1.2450578520617333,0,1,0
0.9188512381960391,0.1889502394576994,-0.41128971834500794,0,1,1
-0.2780404310781063,-1.1989097103656825,0.7310028481162192,0,1,0
-0.2442860434484122,-1.159391089910027,2.728139206013469,1,0,1
-1.1447515414557432,-1.0429399511479012,2.166865405962726,1,1,0
-3.244799777833112,-0.5999690030150644,0.9229792217610043,0,0,0
-1.166365003063485,-1.0846235335630692,1.6264947604395026,1,1,0
1.1511861149202067,-0.5576660029035225,0.39115982167826047,0,1,1
1.5095300136984884,-2.064266027228559,1.5982408478815802,0,0,1
-1.8633791158601263,-0.5552780372104793,-0.9282982566382219,0,0,0
0.4555641427750988,-1.596189168844362,2.13943270726062,1,0,1
0.9913034903225411,-0.05658592827411446,-0.12955053179823217,2,0,1
-2.6512154327184083,-0.4454285227150907,-0.5057890729674357,0,1,0
2.046467995187202,0.12985257404534245,-2.4216420672617267,1,1,1
-0.4792048476257077,-1.3004513318731918,1.515233058401026,1,0,0
1.205501180649705,-0.20269188001743133,-0.3170968817866082,0,0,1
0.07661179388429895,-1.6593194437056116,2.2399016148494892,1,0,0
0.899787864707545,0.06926420843872605,-0.18227096693269051,0,0,1
1.917467148547506,-0.8847325398303185,-0.8113692663412098,0,0,1
1.1314975954296775,-1.4217981831422095,0.7968298622166237,2,0,0
0.2893366076508027,0.8968982013190228,-0.5846557839527218,2,1,1
-0.8606370809912094,0.9598935509451214,-0.9937915884323576,2,0,1
-0.11775537189541041,-1.061693145743545,0.6713306417692205,0,0,0
-2.6287537909411283,-0.3744003098175418,-0.5578728725677078,0,1,0
1.6317466543658465,-0.771062399271419,-0.1211099887299123,1,0,1
0.9344055081187428,-0.033178278023361374,-0.44305947995372263,1,1,1
-0.6211724491949673,-1.304874761770619,2.201040923768736,0,1,0
2.1034025701436194,-1.422821913434702,0.93363235385622,1,0,1
0.47263540173543606,-0.8663443726567448,2.8405146196764575,0,0,1
0.6724353113147792,0.016495348678654986,-0.44224499485677615,2,0,1
2.3193585596030513,-1.0092456465905457,-0.69854730467579,0,0,1
2.701608235841479,-4.208503754553806,2.864190007909085,1,0,1
0.06735000591028495,-1.0101382472473148,0.8643474182662634,0,1,0
1.268091620024633,-0.4613121931246621,0.10013940922374875,1,0,1
-3.5155970666025746,-0.2625905574863866,0.45612650358122975,1,0,0
0.9391066500365649,-1.147068837467606,0.9039191985456123,0,0,1
1.1832076095363089,-0.7773708773615384,0.5444506551477474,2,1,1
1.3375306664936515,-2.2068836593560217,2.0155005219319504,2,0,1
1.1038408793907863,-1.5514711639174306,1.7521740800073953,2,0,0
-1.2581729625927252,-0.7062707481212336,0.16851352494465455,2,0,0
-1.9814645637116997,-0.5075531768697394,-0.011898045844433769,1,1,0
-0.7505136208103513,-1.250454745163034,2.082012273792105,2,0,0
-1.5865712149500375,-0.8658181164546607,1.2691332974314726,0,1,0
-0.9092332819583211,-1.013937145523079,0.819882361640917,0,1,0
-2.12149998187856,-1.0886314029554696,1.7379303999280882,0,0,0
0.00972854978017168,-0.160416576820805,0.6186723742678056,0,1,1
0.29081963526449184,-0.5323696204909403,1.0558793506291415,0,0,1
-4.233588927793632,-0.036573084606323025,-0.2784347943191603,0,1,0
-0.2637195009445997,-1.167196860376512,0.9005899358436228,2,1,0
-1.3632736001324306,-0.8761020716293982,1.3311996625000144,0,0,0
2.617609256512635,-2.1124870137765033,-0.3322832860148408,0,0,1
1.4489395585945735,-2.86673814293045,2.05680946193655,1,1,1
-0.5868701837253361,-1.2228656132577131,2.2175315335708476,0,0,0
0.28294130056380684,-1.767487404145462,3.010186812981678,2,0,0
0.23613305092812176,-0.08295651386689729,1.2290952641770985,0,0,1
0.1791182691992086,-1.547771402307621,2.2145613999721476,2,0,0
1.4285745035198834,0.030814181132973628,-1.2014769246304513,2,1,1
-1.5386402754288562,-0.805087447811154,0.8387878274694541,0,0,0
0.39037043949525074,-0.392617472891552,0.8686018847524357,0,0,1
0.7646570440367766,-1.050414562047958,2.238862387630607,2,0,1
-1.7370780342087762,-1.1877685022076978,2.510895067057125,1,1,0
1.2443110382416722,-0.3596904674457396,1.219257360006254,1,0,1
0.49524213966118835,-1.5635917126484498,1.9243129227964269,2,1,0
-0.22712382571259304,-1.108797802924685,1.6505799860222852,0,0,0
0.6626476800724883,0.036678010636631564,-0.1512747463032893,0,1,1
2.7123144546379283,-1.9367031597808642,-0.8262718133860687,0,0,1
-0.7493888404650324,1.3731709671356076,0.8070390058559188,2,0,1
-0.4162327885599032,-0.9784543126646301,-0.23044011093081274,1,0,0
1.3887735999164725,0.8474652435353136,-0.8041736270188042,0,1,1
0.9510399501799534,-0.13386464077462024,0.12283640954402941,0,1,1
-2.8152784602562524,-0.6334154991413424,1.498673623062258,0,0,0
1.9886143092204374,-2.5660104471786043,1.840488828991397,0,1,1
-0.7182702462659429,-0.784704921987111,-0.1575207698247425,1,1,0
-0.1442294672163702,-1.2213477271446842,1.2479413035112388,1,0,0
-0.7719971435275791,-0.8516420722098104,-0.11651709422957457,2,0,0
0.5977014193312906,-0.2109655998852683,0.1761284248020153,1,0,1
-2.8667033977315786,-0.5700431855119625,0.8279372918194583,0,0,0
-2.4707684890833335,-0.7940967879871843,1.0743828734188805,1,1,0
-0.6727390345680736,-0.8992242260192382,-0.017169011635566944,2,1,0
-0.038404296818383754,-0.8017166477752053,1.5114269352174932,1,1,1
0.051448162728361835,-1.1692077342148026,-0.016442412581616495,2,0,0
0.8654951884606589,0.016572001579359563,-0.5976093396255984,1,0,1
-1.0141284800592856,-0.9330420531898733,0.7661601338982125,1,1,0
-2.2885965865975892,-0.8147613356799618,1.7009164852522733,1,1,0
1.7542763140014397,0.9801782334301894,-0.5304495372448783,0,1,1
1.0063043928558895,0.5815304045874772,-0.557591162666496,0,1,1
""",
        'classification100_group.csv':"""cont_feature_1,cont_feature_2,cont_feature_3,cont_feature_4,cat_feature_1,group,target
-0.38504199005409123,0.6336624299157199,1.0496201930308628,1.1960627773764685,0,Group_B,1
-1.9442115781728755,-2.9932690924253893,-4.524797620082468,-0.957575980093929,2,Group_A,1
-1.184505109026626,-1.4936943547088508,-2.188634126162092,-0.30839580687081636,1,Group_A,0
1.2214474016458658,2.6735263147594486,1.0884082572779707,0.2426034174844578,2,Group_B,1
-2.694502161696647,-3.0981306169117,-2.710985703090162,-2.322962031386096,1,Group_B,0
-0.8720812894292258,-0.7441745913471327,-0.23200398783050613,-0.71582784474604,2,Group_A,0
-2.598242805361795,-3.1209643418832456,-3.1342027967503925,-3.172507502926025,1,Group_B,0
1.7488989681076061,1.2497729372401065,-1.169180705112782,1.1835615262724544,0,Group_B,1
1.229199527643504,-0.6790975913724792,-0.5372609531212273,1.9992754596007307,2,Group_B,0
-0.5165248563096358,-0.28745557505926633,2.566391250056586,2.5525399081617826,0,Group_B,1
-0.41728793461336045,-1.5950608672765578,-2.227347932418386,-0.22693102541262844,1,Group_B,0
-1.2344013495407258,-1.1972523631095449,-0.9634538396814273,-1.6223169130401152,2,Group_A,0
-1.8332240782123992,-0.6667465436532076,-2.253585297221994,0.33525826224289923,2,Group_B,1
-2.264130878061671,-1.567970019144589,-2.096103733894339,0.9057609515269398,1,Group_B,1
-0.43394316543912015,-0.8729342285511027,-0.9168794650717438,0.10299108517568278,1,Group_A,0
-0.07844326061840712,-1.9693313214107244,-1.8686402937035738,0.8732156302632588,1,Group_A,1
-0.6263917924417077,-1.6352398197566904,-3.358615344582765,0.0426356664988814,0,Group_A,1
0.07146544010189837,-0.7987988586262542,-0.31373011910139514,-0.38111346317017847,1,Group_B,0
-0.9044388560352413,-0.7398643261740605,-0.4887941015998517,-0.7129790481488656,1,Group_B,0
-0.9891443752052885,-0.8428136714025587,-1.3119940564107002,0.6929203789259,2,Group_A,1
-0.142295433459124,-1.0318501612551791,-1.3903126577167408,1.054297929861342,2,Group_B,1
-0.03018895530971777,0.9674867132022058,0.5292705128898225,2.01610755416689,2,Group_A,1
0.09255743905146763,-1.5394323086129,-0.4614345083837478,-0.23892452298409916,0,Group_B,0
-1.0870104649715027,-0.6264575561249999,1.8736847192915818,1.7405851259254888,1,Group_B,1
-0.91997582319148,-0.46905233066828045,-2.3118827283293824,0.26681934527023143,0,Group_B,0
-1.0896515941338696,-0.5886685901837301,-0.7933579238515446,-0.9792262165668933,1,Group_A,0
-1.1740393390490045,0.2014732901966383,-0.6589581062151904,-0.9234243797410304,1,Group_A,0
-1.7157170467438578,1.0069898651304743,-0.019755698400513944,-1.935648323297257,2,Group_A,0
-1.7556526157474275,-0.5094654337864035,0.005005298233223376,-1.2433925732645366,1,Group_A,0
-3.2319918590092134,-2.9083637038663372,0.8741976280837225,2.21023774546368,0,Group_B,1
-0.7902909436230482,0.06365079579651156,-0.6639781279433288,0.40253503523042544,0,Group_B,1
-2.9008579592952524,-0.6370223345437214,-1.6071105635080087,-2.781075616256694,2,Group_B,0
0.5542154184879269,1.1501683329371999,0.4038524814994635,1.6066366234342986,1,Group_B,1
-0.6605322791320264,-1.0589244978410368,-1.8662665476569966,-0.333976108007902,0,Group_B,1
-1.7620315988465798,-0.9021821231503185,-0.15014685388717008,-1.7283393609872344,0,Group_B,0
-0.7264367219782448,-1.2720772006557337,-0.763362705532902,2.101202726006548,2,Group_B,1
-0.4751827379827468,-1.3543167361056678,0.004719251265614899,-0.38417148588881,0,Group_B,0
-0.5314255167011999,-1.7893549401581903,-1.4258666606029335,-1.122300701468782,2,Group_A,0
-1.153607735782839,-0.6913830870997038,-1.073190855773568,-1.277153861253591,2,Group_A,0
0.20351833724154256,0.8786452171142396,-0.1335207567579615,0.09534933056985473,0,Group_A,0
-0.8575339568800047,-2.6698095158232253,-4.346249963593344,-0.5879888336012524,0,Group_B,0
-0.0014350007491293892,0.02725514710735366,-1.7327957863368126,0.2601569115698342,2,Group_B,1
-0.8776395908603403,-2.327552685636078,-2.3091866239020877,-0.45209266029848816,1,Group_A,0
-1.8646625358104352,0.8993662310360682,0.83517131297259,-2.16548591763764,1,Group_B,0
-0.5356360889909841,-0.8237867621175854,-0.7872618681227375,0.6392706125791605,2,Group_B,1
-0.12303952816034724,0.377494788481729,-0.014034840958713102,-0.21963163780816863,2,Group_A,1
-2.622822868421421,-2.156559632319147,0.1401874274411239,1.9036196350445391,2,Group_A,1
-1.6988622523508767,-2.420554508754222,-1.7706521643646878,-2.25704953332894,2,Group_B,0
-1.1796233790443587,-3.383141760833871,-2.7505369126862496,-1.4041630252621458,1,Group_A,0
-2.6622316693151484,-3.818931056730988,-3.490805857756133,-3.5014455752987628,0,Group_B,0
-2.154696263448308,-3.3262167200540236,-4.941678059435182,-1.4180573063297843,2,Group_A,1
-1.9167879076266807,-1.3980321114689895,-1.349016101533232,1.3385053157264282,1,Group_B,1
0.145208990585723,-0.40915256235965347,-0.6075499035564841,0.17683785527782314,1,Group_B,1
-0.5106524879439027,-0.30594886034940616,-1.4081656161088978,0.03570911486093786,2,Group_B,0
-1.0109941139517589,-1.122965541520011,1.453635259156988,1.1432812645138188,0,Group_B,1
-1.4541671851468936,-0.8955472272919648,-1.8088863081830975,-1.4849835949843893,1,Group_A,0
-0.6078559039284996,1.3417906778257893,-1.1019099529014178,0.8347840717778969,0,Group_A,1
-0.730846920573649,-1.940346275462976,-1.9347516867694008,-0.7418167332434966,1,Group_A,0
-2.615635874227195,-4.314226761030284,-4.3214520496963456,-0.5190402170743176,0,Group_B,1
1.5979598529664312,1.25203369954466,3.024490724275701,1.9641932870979995,0,Group_B,0
0.4156843504497574,1.7828969788120381,1.986673399602871,0.30297027194235526,0,Group_B,0
-0.5252264576781551,0.3105499982968889,0.6768513598411532,1.8951300447560735,1,Group_A,1
-2.668222922877765,-2.2221854554868044,0.17933253903848545,1.260325749281762,2,Group_A,1
-1.4755720913816506,-3.6264092474460843,-2.5481466636741796,-1.6082559000704961,1,Group_A,0
-0.15508831812076251,-0.4246337925670115,-1.406818633704756,1.4991584404416227,2,Group_A,1
-1.2162862614461434,-1.0990504072736644,0.8254181033130485,2.1486184726764366,1,Group_B,1
-0.11902178020904242,-1.3363308580189484,-2.05687446443228,1.2976992991736647,0,Group_A,1
-0.5794903915343494,-3.202710786591736,-2.4997663133881867,-1.4524725887752437,2,Group_A,0
-0.46001027452098,-0.3397523305423854,0.6403375807537346,1.449792846700678,0,Group_B,1
-1.4140939714633451,1.5858065999196103,2.0157228210976714,-1.4979981565999343,2,Group_A,0
-2.089141582530903,-1.8394927136471044,-1.7224074260007671,-2.195584364251297,0,Group_A,0
-0.9280668489145419,-3.8518159580082223,-1.4907776033348763,-0.04865611673085268,2,Group_B,0
-0.4044417415172078,-1.4416295294635444,-2.7765253957992164,-0.9545333165540453,0,Group_A,1
-0.22924393005818733,1.130209229791236,-0.028976919687624947,-0.069526907687673,2,Group_B,0
-1.3724255103550083,0.06350427383156099,-1.981105122061191,0.8049231525020997,1,Group_B,1
0.7197974039065196,1.6461785278410535,-0.6385055144039817,1.4577903765277112,2,Group_B,1
-0.22770306962569564,-0.8705366765396794,-3.7554194989180028,0.12530646707166337,0,Group_A,1
0.9179264803176417,0.4817938843209639,1.3106163894192329,1.924541590894679,1,Group_B,0
-1.1603823295873672,-2.120801774208528,-2.3421750558001224,0.630099069449635,2,Group_A,1
-0.2098899717254895,0.835223522379384,0.6961330656836382,1.5989411760498298,1,Group_A,1
0.5962720627615816,0.09410035146441897,1.0574126779258957,0.7490834081104616,1,Group_A,0
-0.94350103557852,0.014698272743938867,-1.523444067549283,-1.401742691063514,1,Group_B,0
-0.9390772865882778,-0.9718280051346331,-2.0042342306100753,-0.7167302475069166,1,Group_A,1
-0.4092525240748218,-0.45279841618789207,0.2760581101863111,-0.7343447859906955,1,Group_A,0
-2.032435944872823,-1.6336989321842776,-0.6248695576294752,1.5980279409089797,1,Group_B,1
0.7129685117931053,1.8551316998633731,0.7084206562474762,1.7946164456905467,2,Group_A,1
-0.8413494709775741,-1.2871559227271725,-1.7451801685215753,0.24074842360744253,0,Group_A,1
-1.209614227012293,-0.48489422061414245,0.7985749269942559,2.3735784318254995,0,Group_A,1
-0.25474757925385405,0.9793257372031738,0.653811583511843,2.1279736930933977,2,Group_A,1
-0.5604056695083259,-1.005851612343146,-2.1037382562451272,-0.7042359454418519,2,Group_A,0
1.4225201690747484,1.409346605571737,0.516549130752328,1.1287838916417137,1,Group_A,1
-1.5313557518250116,-1.688902915245118,-2.600903999054875,-1.9675590504900051,1,Group_B,0
-1.169775103418431,-2.1085998522650993,-0.6581625088027343,-1.3423337982116204,0,Group_A,0
-0.6841224373747227,0.3455897204606899,-1.379578580615829,0.0291414088856623,0,Group_A,0
-2.562299158846274,-1.9911692933275364,-1.6431000818081505,0.7891575249656643,1,Group_B,1
-0.8701349976365299,-1.1805762336851564,-0.8369344145274435,-1.4378435405266674,1,Group_A,0
-1.962869120210299,-0.9623655442413102,-0.9037402860244345,-1.5557085729518254,1,Group_B,0
-0.3786732958142571,-0.2506116182239938,1.294109658989854,-0.6318796366093304,0,Group_A,0
-0.25030742761628366,-0.23569624871528405,0.4619779242569759,2.105410543996152,2,Group_A,1
-0.4617410083838386,-2.6708351187075063,-2.41511878606845,-0.15982287978228493,2,Group_A,0
"""
    }

    for filename, content in sample_data.items():
        (datasets_dir / filename).write_text(content)
        filename_xlsx = filename.replace('.csv', '.xlsx')
        df = pd.read_csv(StringIO(content))
        df.to_excel(datasets_dir / filename_xlsx, index=False)

    # Create SQLite database with sample tables
    db_path = datasets_dir / 'test_data.db'
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    
    # Create regression table
    cursor.execute('''
        CREATE TABLE regression (
            x REAL,
            y REAL,
            target INTEGER
        )
    ''')
    cursor.executemany('INSERT INTO regression VALUES (?, ?, ?)', [
        (1.0, 2.0, 0),
        (2.0, 3.0, 1),
        (3.0, 4.0, 0),
        (4.0, 5.0, 1),
        (5.0, 6.0, 0)
    ])
    
    # Create classification table
    cursor.execute('''
        CREATE TABLE classification (
            feature1 REAL,
            feature2 REAL,
            label TEXT
        )
    ''')
    cursor.executemany('INSERT INTO classification VALUES (?, ?, ?)', [
        (0.1, 0.2, 'A'),
        (0.3, 0.4, 'B'),
        (0.5, 0.6, 'A'),
        (0.7, 0.8, 'B'),
        (0.9, 1.0, 'A')
    ])
    
    # Create categorical table
    cursor.execute('''
        CREATE TABLE categorical (
            value REAL,
            category TEXT,
            result TEXT
        )
    ''')
    cursor.executemany('INSERT INTO categorical VALUES (?, ?, ?)', [
        (10.0, 'A', 'positive'),
        (20.0, 'B', 'negative'),
        (30.0, 'A', 'positive'),
        (40.0, 'B', 'negative'),
        (60.0, 'B', 'negative')
    ])
    
    # Create group table
    cursor.execute('''
        CREATE TABLE group_data (
            group_name TEXT,
            x REAL,
            y REAL,
            target INTEGER
        )
    ''')
    cursor.executemany('INSERT INTO group_data VALUES (?, ?, ?, ?)', [
        ('A', 1.0, 2.0, 0),
        ('A', 2.0, 3.0, 1),
        ('B', 3.0, 4.0, 0),
        ('B', 4.0, 5.0, 1),
        ('C', 5.0, 6.0, 0)
    ])
    
    conn.commit()
    conn.close()

    return datasets_dir


@pytest.fixture
def mock_regression_workflow(tmp_path):
    workflow_dir = tmp_path / 'workflows'
    workflow_dir.mkdir()
    workflow_path = workflow_dir / 'test_workflow.py'

    workflow_py = """
from brisk.training.workflow import Workflow

class Regression(Workflow):
    def workflow(self):
        self.model.fit(self.X_train, self.y_train)
        self.evaluate_model(
            self.model, self.X_test, self.y_test, ["MAE"], "test_metrics"
        )
"""
    workflow_path.write_text(workflow_py)
    return workflow_path


@pytest.fixture
def mock_brisk_project(
    mock_briskconfig_file, # pylint: disable=unused-argument, redefined-outer-name
    mock_algorithms_py, # pylint: disable=unused-argument, redefined-outer-name
    mock_data_py, # pylint: disable=unused-argument, redefined-outer-name
    mock_metric_py, # pylint: disable=unused-argument, redefined-outer-name
    mock_training_py, # pylint: disable=unused-argument, redefined-outer-name
    mock_settings_py, # pylint: disable=unused-argument, redefined-outer-name
    mock_datasets, # pylint: disable=unused-argument, redefined-outer-name
    mock_regression_workflow, # pylint: disable=unused-argument, redefined-outer-name
    tmp_path,
    monkeypatch
):
    """Create a standardized temporary project structure for testing."""    
    monkeypatch.chdir(tmp_path)
    return tmp_path


@pytest.fixture(autouse=True)
def reset_project_root_cache():
    """Clear the project root cache after each test"""
    yield
    project.find_project_root.cache_clear()
